<!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="css/style.css" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Gidole&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <script src="https://telegram.org/js/telegram-web-app.js?57"></script>
    </head>
    <style>
        *{
            font-family: "Gidole", sans-serif;
            font-weight: 400;
            font-style: normal;
        }

        .upper-panel{
            position: absolute;
            width: 100%;
            height: 80px;
            background-color: #adacac;
            top: 0px;
            left: 0px;
            text-align: center;
        }
    </style>
    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        async function dd(){
            if (!tg.LocationManager.isInited) {
                tg.LocationManager.init();
                return alert('Location not inited yet!');
            }

            tg.LocationManager.getLocation(function(location_data){
                alert(location_data);
                alert(location_data.speed);
            });
        }

        tg.MainButton.show();
        tg.MainButton.setText("Оплатить");
        tg.MainButton.onClick(() => {
            console.log("start");
            var xhr = new XMLHttpRequest();
            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.setRequestHeader("X-Custom-Info", "getOpenInvoiceUrl");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    tg.openInvoice(xhr.responseText);
                }
            };
            xhr.send();
        });
        
    </script>
    <body>
    <header class="upper-panel">
        <h1></h1>
    </header>
    <button type="submit" style="position: absolute; bottom: 100px; width: 100%; left: 0%; height: 70px;" onclick="dd()">GGGGG</button>
    </body>
</html>